.set LOCALID_MILES, 1

PetalburgCity_MapScripts::
	map_script MAP_SCRIPT_ON_TRANSITION, PetalburgCity_OnTransition
	map_script MAP_SCRIPT_ON_FRAME_TABLE, PetalburgCity_OnFrame
	.byte 0

PetalburgCity_OnTransition: @ 81DC2D7
	setvar VAR_COSTUME, 0
	special	SwapPlayersCostume
	end

PetalburgCity_OnFrame: @ 81DC31C
	.2byte 0
	
Miles_Normal::
	lockall
	msgbox Wassup, MSGBOX_DEFAULT
	multichoicegrid 0, 1, MULTI_MILES_MENU, 1, FALSE
	switch VAR_RESULT
	case 0, Miles_Story
	case 1, ThisUpdate_Description
	case 2, NextUpdate
	case 3, Remember
	case 4, WeSuck
	case 5, Goodnight
	case MULTI_B_PRESSED, Goodnight
	releaseall
	end

Remember:
	compare VAR_GAME_VERSION, 1
	goto_if_lt DistantPast
	goto_if_eq Present
	goto_if_gt Future
	end

Future:
	lockall
	msgbox Futa, MSGBOX_DEFAULT
	releaseall

Futa:
	.string "Hey, future boy,\n"
	.string "did you miss me that much?\p"
	.string "I mean, why are you looking\n"
	.string "into old versions of the game?\p"
	.string "Maybe curiosity?\n"
	.string "Maybe ignorance...$"

Present:
	lockall
	msgbox Gift, MSGBOX_DEFAULT
	releaseall

Gift:
	.string "Nope, I met you today.\n"
	.string "Still, it's nice to meet you!$"
	
DistantPast:
	lockall
	msgbox Past, MSGBOX_DEFAULT
	releaseall

Past:
	.string "Well, last time you were here,\n"
	.string "I was wandering in my lab, so...\l"
	.string "Yeah, today is my first day with you.$"


NextUpdate:
	lockall
	msgbox NextUpdate_Miles, MSGBOX_DEFAULT
	releaseall
	end

NextUpdate_Miles:
	.string "Oh, about the next one?\p"
	.string "We'll try to fix whatever\n"
	.string "bugs and glitches you find,\l"
	.string	"we'll add Pirate Cove here,\l"
	.string "and probably a few more known\l"
	.string "characters, like the Puppet!\p"
	.string "Expect to see more\n"
	.string "expressions as well!$"


Goodnight:
	lockall
	releaseall
	end

WeSuck:
	lockall
	msgbox Succ, MSGBOX_DEFAULT
	releaseall
	end

Succ:
	.string "Ouch...\n"
	.string "You could have at least been\l"
	.string "polite about it, you know?$"

ThisUpdate_Description:
	lockall
	msgbox ThisUpdate, MSGBOX_DEFAULT
	releaseall
	end

Miles_Story:
	subvar VAR_STORIES_TO_TELL, 1
	compare VAR_STORIES_TO_TELL, 0
	call_if_le NoStoriesForYouNoo
	compare VAR_STORIES_TO_TELL, 1
	call_if_eq Story1Noo
	compare VAR_STORIES_TO_TELL, 2
	call_if_eq Story2Noo
	compare VAR_STORIES_TO_TELL, 3
	call_if_eq Story3Noo
	compare VAR_STORIES_TO_TELL, 4
	call_if_eq Story4Noo
	end

NoStoriesForYouNoo:
	lockall
	msgbox NoStoriesForYou, MSGBOX_DEFAULT
	setvar VAR_STORIES_TO_TELL, 5
	releaseall
	end

Story1Noo:
	lockall
	msgbox Story1, MSGBOX_DEFAULT
	releaseall
	end

Story2Noo:
	lockall
	msgbox Story2, MSGBOX_DEFAULT
	releaseall
	end

Story3Noo:
	lockall
	msgbox Story3, MSGBOX_DEFAULT
	releaseall
	end

Story4Noo:
	lockall
	msgbox Story4, MSGBOX_DEFAULT
	releaseall
	end


NoStoriesForYou:
	.string "Sorry, that was all my stories.\p"
	.string "I can repeat them to you, though.$"

Story1:
	.string "This is my last story today.\p"
	.string "In one of those boxes, there is\n"
	.string "a cat cage. It's empty all year\l"
	.string "unless I need to bring Schrodinger\l"
	.string "to the vet, or in travels.$"

Story2:
	.string "This is a funny one.\p"
	.string "I'm the one that's most\n"
	.string "related to science in the team.\p"
	.string "That gave me the nickname of\n"
	.string "'professor Miles', even though\l"
	.string "I'm not even old enough to be one.$"

Story3:
	.string "We're actually considering\n"
	.string "making a physical copy of\l"
	.string "Minigame Investigator after\l"
	.string "we complete the project.\p"
	.string "Then we'll send it to\n"
	.string "Scott Cawthon as thanks.$"

Story4:
	.string "You wouldn't believe what\n"
	.string "was the state of the studio\l"
	.string "this past week!\p"
	.string "We noticed FNaF's anniversary\n"
	.string "would be on thr 8th, and that\l"
	.string "just made us try to make this\l"
	.string "update more complete.\p"
	.string "Problem is, that brought us a\n"
	.string "lot of stress, and certain things\l"
	.string "were clearly rushed... Sorry;;$"

Wassup:
	.string "Hey, {PLAYER}!\n"
	.string "What's up?$"





Miles_Resetposition1:
	walk_down
	walk_left
	walk_left
	walk_up
	step_end

Resetpositionpart2:
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	face_up
	step_end

Miles_Resetposition2:
	walk_up
	walk_left
	walk_left
	step_end

Miles_ResetpositionPlayer2:
	walk_up
	step_end

Miles_ResetpositionPlayer3:
	walk_up
	walk_up
	step_end

Miles_ResetpositionPlayer4:
	walk_up
	walk_up
	walk_up
	walk_left
	step_end

Miles_Resetposition3:
	walk_up
	walk_up
	walk_left
	walk_left
	step_end

Miles_Resetposition4:
	walk_up
	walk_up
	walk_left
	walk_left
	step_end

Miles_Intro1::
	lockall
	call Miles_Introduction
	setvar VAR_MILES_STATE, 1
	applymovement LOCALID_MILES, WalkupToPlayer1
	waitmovement 0
	msgbox Miles_Intro, MSGBOX_DEFAULT
	applymovement LOCALID_MILES, Miles_Resetposition1
	waitmovement 0
	applymovement LOCALID_MILES, Resetpositionpart2
	applymovement OBJ_EVENT_ID_PLAYER, Resetpositionpart2
	waitmovement 0
	call Miles_Intro_Normal
	releaseall
	end

Miles_Intro2::
	lockall
	call Miles_Introduction
	setvar VAR_MILES_STATE, 1
	applymovement LOCALID_MILES, WalkupToPlayer2
	waitmovement 0
	msgbox Miles_Intro, MSGBOX_DEFAULT
	applymovement LOCALID_MILES, Miles_Resetposition2
	waitmovement 0
	applymovement LOCALID_MILES, Resetpositionpart2
	applymovement OBJ_EVENT_ID_PLAYER, Miles_ResetpositionPlayer2
	waitmovement 0
	applymovement OBJ_EVENT_ID_PLAYER, Resetpositionpart2
	waitmovement 0
	call Miles_Intro_Normal
	releaseall
	end

Miles_Intro3::
	lockall
	call Miles_Introduction
	setvar VAR_MILES_STATE, 1
	applymovement LOCALID_MILES, WalkupToPlayer3
	waitmovement 0
	msgbox Miles_Intro, MSGBOX_DEFAULT
	applymovement LOCALID_MILES, Miles_Resetposition3
	waitmovement 0
	applymovement LOCALID_MILES, Resetpositionpart2
	applymovement OBJ_EVENT_ID_PLAYER, Miles_ResetpositionPlayer3
	waitmovement 0
	applymovement OBJ_EVENT_ID_PLAYER, Resetpositionpart2
	waitmovement 0
	call Miles_Intro_Normal
	releaseall
	end

Miles_Intro4::
	lockall
	call Miles_Introduction
	setvar VAR_MILES_STATE, 10
	applymovement LOCALID_MILES, WalkupToPlayer4
	waitmovement 0
	msgbox Miles_Intro, MSGBOX_DEFAULT
	applymovement LOCALID_MILES, Miles_Resetposition4
	waitmovement 0
	applymovement LOCALID_MILES, Resetpositionpart2
	applymovement OBJ_EVENT_ID_PLAYER, Miles_ResetpositionPlayer4
	waitmovement 0
	applymovement OBJ_EVENT_ID_PLAYER, Resetpositionpart2
	waitmovement 0
	call Miles_Intro_Normal
	releaseall
	end

ToBacktrack:
	walk_left
	step_end

ToBack:
	walk_down
	walk_down
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_down
	walk_down
	step_end

ToBackMiles:
	walk_down
	walk_down
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_down
	walk_down
	walk_right
	face_down
	step_end

Miles_Out:
	walk_up
	walk_up
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	step_end

Miles_Intro_Normal:
	msgbox Miles_View, MSGBOX_DEFAULT
	applymovement LOCALID_MILES, ToBackMiles
	applymovement OBJ_EVENT_ID_PLAYER, ToBacktrack
	waitmovement 0
	applymovement OBJ_EVENT_ID_PLAYER, ToBack
	waitmovement 0
	msgbox Miles_Back, MSGBOX_DEFAULT
	msgbox ThisUpdate, MSGBOX_DEFAULT
	msgbox IfYouNeedMe, MSGBOX_DEFAULT
	applymovement LOCALID_MILES, Miles_Out
	waitmovement 0
	removeobject LOCALID_MILES
	setflag FLAG_HIDE_MILES_2
	clearflag FLAG_HIDE_MILES
	return
	releaseall

Miles_Introduction:
	lockall
	addobject LOCALID_MILES
	msgbox Miles_Tired, MSGBOX_DEFAULT
	applymovement LOCALID_MILES, MilesMoveForward
	applymovement OBJ_EVENT_ID_PLAYER, LookatMiles1
	waitmovement 0
	msgbox Miles_Notice
	return
	end
	
LookatMiles1:
	face_right
	step_end

	Miles_Tired:
	.string "Oof... Th-that was...\n"
	.string "a lot of stairs...$"

Miles_Notice:
	.string "Oh, you're already here!$"

Miles_Intro:
	.string "Name's Miles.\n"
	.string "Welcome to my room!\p"
	.string "I'm one of the developers\n"
	.string "for Minigame Investigator,\l"
	.string "so we use my room as a\l"
	.string "testing hub of sorts.\p"
	.string "You're welcome to test as well!\p"
	.string "Here, let me show you around!$"
	
Miles_View:
	.string "Here you can see all the\n"
	.string "animatronics we've put into the game.\l"
	.string "They don't move, though.\p"
	.string "Creepy.$"

Miles_Back:
	.string "And here's the star of the show!\n"
	.string "These doors will lead to the areas\l"
	.string "we've been testing.$"

ThisUpdate:
	.string "This update is centred around the\n"
	.string "end of night minigames of FNaF 3,\l"
	.string	"which happen in the FNaF 1 location!\p"
	.string "I hope you like it, a lot of effort was\n"
	.string "put into it during the past week!$"

IfYouNeedMe:
	.string "I'll be in the entrance\n"
	.string "if you need me.\l"
	.string "We can talk more in depth then!$"

MilesMoveForward:
	walk_down
	step_end

WalkupToPlayer1:
	walk_left
	walk_left
	step_end

WalkupToPlayer2:
	walk_down
	walk_left
	walk_left
	step_end

WalkupToPlayer3:
	walk_down
	walk_down
	walk_left
	walk_left
	step_end

WalkupToPlayer4:
	walk_left
	walk_left
	walk_down
	walk_down
	step_end

Door_FNaF1::
	lockall
	msgbox FNaF1, MSGBOX_DEFAULT
	fadescreen FADE_TO_BLACK
	setvar VAR_COSTUME, 1
	special SwapPlayersCostume
	fadescreen FADE_FROM_BLACK
	releaseall
	end

Door_FNaF2::
	lockall
	msgbox FNaF2, MSGBOX_DEFAULT
	release
	end

Door_FNaF4::
	lockall
	msgbox FNaF4, MSGBOX_DEFAULT
	release
	end

Door_FNaF6::
	lockall
	msgbox FNaF6, MSGBOX_DEFAULT
	release
	end

Door_GoBack::
	lockall
	msgbox GoBack, MSGBOX_DEFAULT
	release
	end

Door_PhoneDude::
	lockall
	msgbox Phone_Dude, MSGBOX_DEFAULT
	release
	end

Door_Arson::
	lockall
	msgbox Prision, MSGBOX_DEFAULT
	release
	end

Door_City::
	lockall
	msgbox City, MSGBOX_DEFAULT
	release
	end

FNaF1:
	.string "Old Freddy Fazbear's$"
FNaF2:
	.string "Freddy Fazbear's -\n"
	.string "- 1987$"
FNaF4:
	.string "Fredbear's Family Diner$"
FNaF6:
	.string "NEW Freddy Fazbear's$"
GoBack:
	.string "PETALBURG TOWN$"
City:
	.string "Hurricane, Utah$"
Prision:
	.string "Pyromaniac's Cell$"
Phone_Dude:
	.string "A really nice\n"
	.string "dude's house$"
